import{c as x,V as o,r as g,j as e,L as m}from"./index-bfa36bc9.js";import{u as p,o as j,f as y}from"./auth-ac9ccdba.js";import{u,a as h,I as w}from"./axios-ae817925.js";import{B as d,M as N}from"./Button-dafb42d1.js";const b=x("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),v=x("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),k=async s=>(await h.post("/forgot-password",s)).data,S=()=>u({mutationFn:k,onSuccess:s=>{o.success(s.message||(s==null?void 0:s.status)||"Reset link sent to your email!")},onError:s=>{var a,r,t,i;const l=((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||((i=(t=s.response)==null?void 0:t.data)==null?void 0:i.email)||s.message||"Failed to send reset email";o.error(l)}}),E=async s=>(await h.post("/resend-email",s)).data,M=()=>u({mutationFn:E,onSuccess:s=>{o.success(s.message||"Email resent successfully!")},onError:s=>{var a,r;const l=((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||s.message||"Failed to resend email";o.error(l)}}),P={email:""},V=()=>{var c;const[s,l]=g.useState(!1),a=S(),r=M(),t=p({resolver:j(y),mode:"onSubmit",reValidateMode:"onChange",defaultValues:P}),i=async n=>{t.clearErrors(),a.mutate(n,{onSuccess:()=>{l(!0)}})},f=()=>{const n=t.getValues("email");n&&r.mutate({email:n})};return s?e.jsx("div",{className:"min-h-screen flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center px-4 sm:px-6 lg:px-20 xl:px-24 bg-white",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})})}),e.jsx("span",{className:"text-xl font-semibold text-primary-600",children:"Adhicine"})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx(v,{className:"mx-auto h-16 w-16 text-green-500"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Check Your Email"}),e.jsxs("p",{className:"text-gray-600 mb-8",children:["We've sent a password reset link to"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:t.getValues("email")}),". Click the link in the email to reset your password."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{onClick:f,variant:"outline",className:"w-full",size:"lg",isLoading:r.isPending,children:"Resend Email"}),e.jsx(m,{to:"/sign-in",className:"block w-full py-3 text-center text-sm text-primary-600 hover:text-primary-500 transition-colors font-semibold",children:"Back to Sign In"})]})]})]})})}):e.jsx("div",{className:"min-h-screen flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center px-4 sm:px-6 lg:px-20 xl:px-24 bg-white",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})})}),e.jsx("span",{className:"text-xl font-semibold text-primary-600",children:"Adhicine"})]})}),e.jsxs(m,{to:"/sign-in",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 transition-colors mb-8",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Back to Sign In"]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Forgot Password?"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"No worries, we'll send you reset instructions."})]}),e.jsxs("form",{onSubmit:t.handleSubmit(i),className:"space-y-6",children:[e.jsx(w,{...t.register("email"),type:"email",label:"Email",placeholder:"Enter your email",leftIcon:N,error:(c=t.formState.errors.email)==null?void 0:c.message}),e.jsx(d,{type:"submit",isLoading:t.formState.isSubmitting||a.isPending,className:"w-full",size:"lg",children:"Reset Password"})]})]})})})};export{V as default};

import{c as f,u as b,a as v,s as N,V as u,r as I,b as S,d as k,e as A,j as e,N as L,L as M}from"./index-208ce614.js";import{u as E,a as V,b as P,I as h,o as F,s as z}from"./auth-7fc5136a.js";import{M as B,B as C}from"./Button-ffa2dc2b.js";import{E as O}from"./eye-1f2a668b.js";const R=f("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),T=f("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),U=async a=>(await V.post("/login",a)).data,q=()=>{const a=b(),i=v();return E({mutationFn:U,onSuccess:t=>{const{id:o,email:r,name:s,profilePhotoUrl:d,googleId:x,facebookId:n,phone:c,emailVerifiedAt:l,boxId:m,accessToken:p,createdAt:g,otpVerifiedAt:y,acceptedAt:j,role:w}=t==null?void 0:t.data;a(N({user:{id:o,email:r,name:s,profilePhotoUrl:d,googleId:x,facebookId:n,phone:c,emailVerifiedAt:l,boxId:m,accessToken:p,createdAt:g,otpVerifiedAt:y,acceptedAt:j,role:w}})),i("/",{replace:!0}),u.success(t.message||"Login successful!")},onError:t=>{var r,s;const o=((s=(r=t.response)==null?void 0:r.data)==null?void 0:s.message)||t.message||"Login failed";u.error(o)}})},D={email:"",password:""},K=()=>{var n,c,l,m;const[a,i]=I.useState(!1),t=S(),o=q(),r=k(A),s=P({resolver:F(z),mode:"onSubmit",reValidateMode:"onChange",defaultValues:D}),d=((c=(n=t.state)==null?void 0:n.from)==null?void 0:c.pathname)||"/";if(r)return e.jsx(L,{to:d,replace:!0});const x=async p=>{s.clearErrors(),o.mutate(p)};return e.jsx("div",{className:"min-h-screen flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center px-4 sm:px-6 lg:px-20 xl:px-24 bg-white",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})})}),e.jsx("span",{className:"text-xl font-semibold text-primary-600",children:"Adhicine"})]})}),e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sign In To Adhicine"})}),e.jsxs("form",{onSubmit:s.handleSubmit(x),className:"space-y-6",children:[e.jsx(h,{...s.register("email"),type:"email",label:"Email",placeholder:"example@adhicine.com",leftIcon:B,error:(l=s.formState.errors.email)==null?void 0:l.message}),e.jsx(h,{...s.register("password"),type:a?"text":"password",label:"Password",placeholder:"••••••••••••",leftIcon:T,rightIcon:a?R:O,onRightIconClick:()=>i(!a),error:(m=s.formState.errors.password)==null?void 0:m.message}),e.jsx(M,{to:"/forgot-password",className:"block text-right text-sm text-primary-600 hover:text-primary-500 transition-colors font-semibold",children:"Forgot Password?"}),e.jsx(C,{type:"submit",isLoading:s.formState.isSubmitting||o.isPending,className:"w-full",size:"lg",children:"Sign In"})]})]})})})};export{K as default};

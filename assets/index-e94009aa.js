import{c as y,u as N,a as v,s as I,V as x,r as S,b as A,d as L,e as k,j as e,N as E,L as M}from"./index-ca4c73ca.js";import{u as V,a as P,b as F,I as f,o as z}from"./index.esm-087c259c.js";import{B}from"./Button-0c9ea384.js";import{s as C}from"./auth-3d5d4f59.js";import{M as D}from"./mail-9887f2ff.js";import{E as R}from"./eye-off-3af44817.js";import{E as T}from"./eye-3c38e5f0.js";const U=y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),O=async a=>(await P.post("/login",a)).data,_=()=>{const a=N(),i=v();return V({mutationFn:O,onSuccess:t=>{const{id:o,email:r,name:s,profilePhotoUrl:d,googleId:p,facebookId:n,phone:c,emailVerifiedAt:l,boxId:m,accessToken:u,createdAt:h,otpVerifiedAt:g,acceptedAt:w,role:b,roleDisplayName:j}=t==null?void 0:t.data;a(I({user:{id:o,email:r,name:s,profilePhotoUrl:d,googleId:p,facebookId:n,phone:c,emailVerifiedAt:l,boxId:m,accessToken:u,createdAt:h,otpVerifiedAt:g,acceptedAt:w,role:b,roleDisplayName:j,hospital_id:null}})),i("/",{replace:!0}),x.success(t.message||"Login successful!")},onError:t=>{var r,s;const o=((s=(r=t.response)==null?void 0:r.data)==null?void 0:s.message)||t.message||"Login failed";x.error(o)}})},$={email:"",password:""},X=()=>{var n,c,l,m;const[a,i]=S.useState(!1),t=A(),o=_(),r=L(k),s=F({resolver:z(C),mode:"onSubmit",reValidateMode:"onChange",defaultValues:$}),d=((c=(n=t.state)==null?void 0:n.from)==null?void 0:c.pathname)||"/";if(r)return e.jsx(E,{to:d,replace:!0});const p=async u=>{s.clearErrors(),o.mutate(u)};return e.jsx("div",{className:"min-h-screen flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center px-4 sm:px-6 lg:px-20 xl:px-24 bg-white",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})})}),e.jsx("span",{className:"text-xl font-semibold text-primary-600",children:"Adhicine"})]})}),e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sign In To Adhicine"})}),e.jsxs("form",{onSubmit:s.handleSubmit(p),className:"space-y-6",children:[e.jsx(f,{...s.register("email"),type:"email",label:"Email",placeholder:"example@adhicine.com",leftIcon:D,error:(l=s.formState.errors.email)==null?void 0:l.message}),e.jsx(f,{...s.register("password"),type:a?"text":"password",label:"Password",placeholder:"••••••••••••",leftIcon:U,rightIcon:a?R:T,onRightIconClick:()=>i(!a),error:(m=s.formState.errors.password)==null?void 0:m.message}),e.jsx(M,{to:"/forgot-password",className:"block text-right text-sm text-primary-600 hover:text-primary-500 transition-colors font-semibold",children:"Forgot Password?"}),e.jsx(B,{type:"submit",isLoading:s.formState.isSubmitting||o.isPending,className:"w-full",size:"lg",children:"Sign In"})]})]})})})};export{X as default};

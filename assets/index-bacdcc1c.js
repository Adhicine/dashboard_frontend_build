import{c as b,u as y,a as N,s as v,V as p,r as I,b as S,d as A,e as L,j as e,N as k,L as E}from"./index-bfa36bc9.js";import{u as M,o as V,s as P}from"./auth-ac9ccdba.js";import{u as F,a as z,I as f}from"./axios-ae817925.js";import{M as B,B as C}from"./Button-dafb42d1.js";import{E as R}from"./eye-off-ed9313c2.js";import{E as T}from"./eye-213acc0d.js";const U=b("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),D=async a=>(await z.post("/login",a)).data,O=()=>{const a=y(),i=N();return F({mutationFn:D,onSuccess:t=>{const{id:o,email:r,name:s,profilePhotoUrl:d,googleId:u,facebookId:n,phone:c,emailVerifiedAt:l,boxId:m,accessToken:x,createdAt:h,otpVerifiedAt:g,acceptedAt:w,role:j}=t==null?void 0:t.data;a(v({user:{id:o,email:r,name:s,profilePhotoUrl:d,googleId:u,facebookId:n,phone:c,emailVerifiedAt:l,boxId:m,accessToken:x,createdAt:h,otpVerifiedAt:g,acceptedAt:w,role:j}})),i("/",{replace:!0}),p.success(t.message||"Login successful!")},onError:t=>{var r,s;const o=((s=(r=t.response)==null?void 0:r.data)==null?void 0:s.message)||t.message||"Login failed";p.error(o)}})},$={email:"",password:""},W=()=>{var n,c,l,m;const[a,i]=I.useState(!1),t=S(),o=O(),r=A(L),s=M({resolver:V(P),mode:"onSubmit",reValidateMode:"onChange",defaultValues:$}),d=((c=(n=t.state)==null?void 0:n.from)==null?void 0:c.pathname)||"/";if(r)return e.jsx(k,{to:d,replace:!0});const u=async x=>{s.clearErrors(),o.mutate(x)};return e.jsx("div",{className:"min-h-screen flex",children:e.jsx("div",{className:"flex-1 flex flex-col justify-center px-4 sm:px-6 lg:px-20 xl:px-24 bg-white",children:e.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-primary-600 rounded-full"})})}),e.jsx("span",{className:"text-xl font-semibold text-primary-600",children:"Adhicine"})]})}),e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sign In To Adhicine"})}),e.jsxs("form",{onSubmit:s.handleSubmit(u),className:"space-y-6",children:[e.jsx(f,{...s.register("email"),type:"email",label:"Email",placeholder:"example@adhicine.com",leftIcon:B,error:(l=s.formState.errors.email)==null?void 0:l.message}),e.jsx(f,{...s.register("password"),type:a?"text":"password",label:"Password",placeholder:"••••••••••••",leftIcon:U,rightIcon:a?R:T,onRightIconClick:()=>i(!a),error:(m=s.formState.errors.password)==null?void 0:m.message}),e.jsx(E,{to:"/forgot-password",className:"block text-right text-sm text-primary-600 hover:text-primary-500 transition-colors font-semibold",children:"Forgot Password?"}),e.jsx(C,{type:"submit",isLoading:s.formState.isSubmitting||o.isPending,className:"w-full",size:"lg",children:"Sign In"})]})]})})})};export{W as default};
